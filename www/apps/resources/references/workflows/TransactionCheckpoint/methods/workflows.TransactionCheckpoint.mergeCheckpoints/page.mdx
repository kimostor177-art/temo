import { TypeList } from "docs-ui"

# mergeCheckpoints

Merge the current checkpoint with incoming data from a concurrent save operation.
This handles race conditions when multiple steps complete simultaneously.

## Parameters

<TypeList types={[{"name":"currentTransactionData","type":"[TransactionCheckpoint](../../../classes/workflows.TransactionCheckpoint/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"#private","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"flow","type":"[TransactionFlow](../../../types/workflows.TransactionFlow/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[TransactionContext](../../../classes/workflows.TransactionContext/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"errors","type":"[TransactionStepError](../../../classes/workflows.TransactionStepError/page.mdx)[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]},{"name":"storedData","type":"[TransactionCheckpoint](../../../classes/workflows.TransactionCheckpoint/page.mdx)","description":"The checkpoint data being saved","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"#private","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"flow","type":"[TransactionFlow](../../../types/workflows.TransactionFlow/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"context","type":"[TransactionContext](../../../classes/workflows.TransactionContext/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"errors","type":"[TransactionStepError](../../../classes/workflows.TransactionStepError/page.mdx)[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="mergeCheckpoints"/>

## Returns

<TypeList types={[{"name":"#private","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"flow","type":"[TransactionFlow](../../../types/workflows.TransactionFlow/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"modelId","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"definition","type":"[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)","description":"Defines the structure and behavior of a single step within a transaction workflow.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"transactionId","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"runId","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasAsyncSteps","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasFailedSteps","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasSkippedOnFailureSteps","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasWaitingSteps","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasSkippedSteps","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasRevertedSteps","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"timedOutAt","type":"`number` \\| `null`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"state","type":"[TransactionState](../../../enums/workflows.TransactionState/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"steps","type":"`object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"_v","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"options","type":"[TransactionModelOptions](../../../types/workflows.TransactionModelOptions/page.mdx)","description":"Defines the options for a transaction model, which are applicable to the entire workflow.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"metadata","type":"`object`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"startedAt","type":"`number`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"cancelledAt","type":"`number`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"temporaryFailedAt","type":"`number` \\| `null`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"context","type":"[TransactionContext](../../../classes/workflows.TransactionContext/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"payload","type":"`unknown`","description":"Object containing the initial payload.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"invoke","type":"`Record<string, unknown>`","description":"Object containing responses of Invoke handlers on steps flagged with saveResponse.","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"compensate","type":"`Record<string, unknown>`","description":"Object containing responses of Compensate handlers on steps flagged with saveResponse.","optional":false,"defaultValue":"","expandable":false,"children":[]}]},{"name":"errors","type":"[TransactionStepError](../../../classes/workflows.TransactionStepError/page.mdx)[]","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"action","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handlerType","type":"[TransactionHandlerType](../../../enums/workflows.TransactionHandlerType/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"error","type":"`any`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]},{"name":"constructor","type":"(`flow`: [TransactionFlow](../../../types/workflows.TransactionFlow/page.mdx), `context`: [TransactionContext](../../../classes/workflows.TransactionContext/page.mdx), `errors?`: [TransactionStepError](../../../classes/workflows.TransactionStepError/page.mdx)[]) => [TransactionCheckpoint](../../../classes/workflows.TransactionCheckpoint/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"mergeCheckpoints","type":"(`currentTransactionData`: [TransactionCheckpoint](../../../classes/workflows.TransactionCheckpoint/page.mdx), `storedData?`: [TransactionCheckpoint](../../../classes/workflows.TransactionCheckpoint/page.mdx)) => [TransactionCheckpoint](../../../classes/workflows.TransactionCheckpoint/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="mergeCheckpoints"/>
